(function(){"use strict";var e,t,n,r,i,s,o,u,a,f,l,c,h,p;a={};n=document;l=false;c="active";o=6e4;s=false;t=function(){var e,t,n,r,i,s;e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};i=function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()};s={};n="__ceGUID";t=function(e,t,r){e[n]=undefined;if(!e[n]){e[n]="ifvisible.object.event.identifier"}if(!s[e[n]]){s[e[n]]={}}if(!s[e[n]][t]){s[e[n]][t]=[]}return s[e[n]][t].push(r)};r=function(e,t,r){var i,o,u,a,f;if(e[n]&&s[e[n]]&&s[e[n]][t]){a=s[e[n]][t];f=[];for(o=0,u=a.length;o<u;o++){i=a[o];f.push(i(r||{}))}return f}};return{add:t,fire:r}}();e=function(){var e;e=false;return function(t,n,r){if(!e){if(t.addEventListener){e=function(e,t,n){return e.addEventListener(t,n,false)}}else if(t.attachEvent){e=function(e,t,n){return e.attachEvent("on"+t,n,false)}}else{e=function(e,t,n){return e["on"+t]=n}}}return e(t,n,r)}}();r=function(e,t){var r;if(n.createEventObject){return e.fireEvent("on"+t,r)}else{r=n.createEvent("HTMLEvents");r.initEvent(t,true,true);return!e.dispatchEvent(r)}};u=function(){var e,t,r,i,s;i=void 0;s=3;r=n.createElement("div");e=r.getElementsByTagName("i");t=function(){return r.innerHTML="<!--[if gt IE "+ ++s+"]><i></i><![endif]-->",e[0]};while(t()){continue}if(s>4){return s}else{return i}}();i=false;p=void 0;if(typeof n.hidden!=="undefined"){i="hidden";p="visibilitychange"}else if(typeof n.mozHidden!=="undefined"){i="mozHidden";p="mozvisibilitychange"}else if(typeof n.msHidden!=="undefined"){i="msHidden";p="msvisibilitychange"}else if(typeof n.webkitHidden!=="undefined"){i="webkitHidden";p="webkitvisibilitychange"}h=function(){var t,r;t=false;r=function(){clearTimeout(t);if(c!=="active"){a.wakeup()}s=+(new Date);return t=setTimeout(function(){if(c==="active"){return a.idle()}},o)};r();e(n,"mousemove",r);e(n,"keyup",r);e(window,"scroll",r);return a.focus(r)};f=function(){var t;if(l){return true}if(i===false){t="blur";if(u<9){t="focusout"}e(window,t,function(){return a.blur()});e(window,"focus",function(){return a.focus()})}else{e(n,p,function(){if(n[i]){return a.blur()}else{return a.focus()}},false)}l=true;return h()};a={setIdleDuration:function(e){return o=e*1e3},getIdleDuration:function(){return o},getIdleInfo:function(){var e,t;e=+(new Date);t={};if(c==="idle"){t.isIdle=true;t.idleFor=e-s;t.timeLeft=0;t.timeLeftPer=100}else{t.isIdle=false;t.idleFor=e-s;t.timeLeft=s+o-e;t.timeLeftPer=(100-t.timeLeft*100/o).toFixed(2)}return t},focus:function(e){if(typeof e==="function"){return this.on("focus",e)}c="active";t.fire(this,"focus");t.fire(this,"wakeup");return t.fire(this,"statusChanged",{status:c})},blur:function(e){if(typeof e==="function"){return this.on("blur",e)}c="hidden";t.fire(this,"blur");t.fire(this,"idle");return t.fire(this,"statusChanged",{status:c})},idle:function(e){if(typeof e==="function"){return this.on("idle",e)}c="idle";t.fire(this,"idle");return t.fire(this,"statusChanged",{status:c})},wakeup:function(e){if(typeof e==="function"){return this.on("wakeup",e)}c="active";t.fire(this,"wakeup");return t.fire(this,"statusChanged",{status:c})},on:function(e,n){f();return t.add(this,e,n)},onEvery:function(e,t){var n;f();n=setInterval(function(){if(c==="active"){return t()}},e*1e3);return{stop:function(){return clearInterval(n)},code:n,callback:t}},now:function(){f();return c==="active"}};if(typeof define==="function"&&define.amd){define(function(){return a})}else{window.ifvisible=a}}).call(this)